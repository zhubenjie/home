
<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1" /> 
  <title></title>
  <style>
  body{
    background: url(b5.png) no-repeat  black;
    margin: 0;
  }
  </style>
</head>
<body onload="go()">
<script type="text/javascript" src='../js/three81.js'></script>
<!-- <script type="text/javascript" src='js/FirstPersonControls.js'></script> -->
<!-- <script src='js/TrackballControls.js'></script> -->
<script>
var renderer,camera,scene,obj,matetial,geometry
var wiW=window.innerWidth,wiH=window.innerHeight
var clickFlag=true
  function init() {
    renderer=new THREE.WebGLRenderer({antialias :true})
    renderer.setSize(wiW,wiH)
    document.body.appendChild(renderer.domElement)
    scene=new THREE.Scene()
    scene.fog=new THREE.Fog('#cacaca',10,2000)
    camera=new THREE.PerspectiveCamera(45,wiW/wiH,0.1,5000)
    camera.position.z=30
     camera.position.y=50
     camera.lookAt(scene.position)
    // Trackball=new THREE.FirstPersonControls(camera)
    var map1=new THREE.Texture(canvas1())
    map1.needsUpdate=true
    geometry=[
    new THREE.BoxGeometry(2,2,2),
    new THREE.Geometry(),
    new THREE.BufferGeometry()
    ]
    var c=new THREE.GridHelper(1000,200)
    c.name='q'
    scene.add(c)
    //material
    material=[
    new THREE.MeshBasicMaterial({side:THREE.DoubleSide}),
    new THREE.MeshNormalMaterial(),
    new THREE.MeshBasicMaterial({vertexColors:THREE.VertexColors,side:THREE.DoubleSide}),
    new THREE.MeshBasicMaterial({color:'green',wireframe:true})
    ]
     // ccc=new THREE.TrackballControls(camera)
   cube=new THREE.Mesh(new THREE.BoxGeometry(6,6,6),material[3])
   cube.rotation.y=0.6
   cube.position.set(6,1,2)
   // scene.add(cube)
   // var q=new THREE.TextureLoader().load('http://www.zhubenjie.top/img/bar3.png')
   // q.needsUpdate=true
   
   // var bar=new THREE.TextureLoader().load('b1.png')
   // bar.needsUpdate=true

   var cc=canvas1()
   q=new THREE.Texture(cc)
   q.needsUpdate=true
   q.wrapS=q.wrapT=THREE.RepeatWrapping
   q.repeat.set(6,6)
    var ccc=new THREE.Mesh(new THREE.PlaneGeometry(100,100),new THREE.MeshBasicMaterial({}))
    // ccc.rotation.x=-90*Math.PI/180
    // scene.add(ccc)
// console.log(scene.children[0].name)

    var qiu= new THREE.SphereGeometry(20,10,1)
     ppi=new THREE.Mesh(qiu,new THREE.MeshBasicMaterial({vertexColors: THREE.FaceColors}))
    ppi.position.set(12,0,-20)
    ppi.add(cube)
  for(var i=0;i<ppi.geometry.faces.length;i++){
    ppi.geometry.faces[i].color.setRGB(Math.random(),Math.random(),Math.random())
  }
    scene.add(ppi)
    // ppi.add(camera)


window.addEventListener('resize',windowResize,false)
// window.addEventListener('keydown',mouseMove,false)
// window.addEventListener('mousedown',mouseDown,false)
// window.addEventListener('mouseup',mouseUp,false)
}

  function render(){
     cube.translateX(0.05)
    ppi.rotateY(0.005)
    // cube.translateX(0.05)
    renderer.render(scene,camera)
    requestAnimationFrame(render)
  }
  function go(){
    init()
    render()
  }
  function canvas1(){
    var canvas=document.createElement('canvas')
    canvas.width=64
    canvas.height=64
    var c=canvas.getContext('2d')
    c.arc(32,32,32,0,20)
    c.fillStyle='#f60'
    c.fill()
    return canvas;
  }
  function windowResize(){
    wiW=window.innerWidth
    wiH=window.innerHeight
    renderer.setSize(wiW,wiH)
    camera.aspect=wiW/wiH
    camera.updateProjectionMatrix()
  }

  function mouseMove(e){
    console.log(e.keyCode && true)
    //W  87   S83  A 65  D68
    if(e.keyCode == 87 ){

      console.log('yes')
    }
    switch(e.keyCode){
      case 87:
       case 38:
      camera.translateZ(-1.6);
      break;
      case 83:
      case 40:
      camera.translateZ(1.6);
      break;
      case 65:
      case 37:
      camera.translateX(-1.6);
      break;
      case 68:
      case 39:
      camera.translateX(1.6);
      break;
      case 32:
      camera.translateY(1.6)
      break;
      case 90:
      camera.translateY(-1.6);
      break;
    }
  }
  function mouseDown(e){
    clickFlag=true
    var eX=e.clientX
     var eY=e.clientY
      window.onmousemove=function(e){
          if(clickFlag){
            camera.rotateY(-(e.clientX-eX)/20000)
      }
    }
  }
  function mouseUp(){
    clickFlag=false
  }
</script>
<script>
console.log(window.CanvasRenderingContext2D)
</script>

</body>
</html>
