<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1" /> 
  <title></title>
  <style>
  body{
    background: #cacaca;
    margin: 0;
    overflow: hidden;
  }
  </style>
</head>
<body onload="go()">
<script type="text/javascript" src='../js/three81.js'></script>
<script>
var renderer,camera,scene,obj,matetial,geometry
var wiW=window.innerWidth,wiH=window.innerHeight
var clickFlag=true
  function init() {
    renderer=new THREE.WebGLRenderer({alpha:true})
    renderer.setSize(wiW,wiH)
    document.body.appendChild(renderer.domElement)
    scene=new THREE.Scene()
    scene.fog=new THREE.Fog('#cacaca',10,2000)
    camera=new THREE.PerspectiveCamera(45,wiW/wiH,0.1,2000)
    camera.position.z=50
     camera.position.y=10
    // Trackball=new THREE.FirstPersonControls(camera)
    var map1=new THREE.Texture(canvas1())
    map1.needsUpdate=true
    geometry=[
    new THREE.BoxGeometry(2,2,2),
    new THREE.Geometry(),
    new THREE.BufferGeometry()
    ]
//     var c=new THREE.GridHelper(1000,600)
//     c.name='q'
//     scene.add(c)
    //material
    material=[
    new THREE.MeshBasicMaterial({map:map1,side:THREE.DoubleSide}),
    new THREE.MeshNormalMaterial(),
    new THREE.MeshBasicMaterial({vertexColors:THREE.VertexColors,side:THREE.DoubleSide}),
    new THREE.MeshBasicMaterial({color:'#f60'})
    ]
     // ccc=new THREE.TrackballControls(camera)
   cube=new THREE.Mesh(new THREE.BoxGeometry(6,6,6),material[3])
   cube.rotation.y=0.6
   cube.position.set(6,1,2)
   scene.add(cube)
   var q=new THREE.TextureLoader().load('http://www.zhubenjie.top/image/Wood.jpg')
   q.needsUpdate=true
   q.wrapS=q.wrapT=THREE.RepeatWrapping
   q.repeat.set(150,150)

    var ccc=new THREE.Mesh(new THREE.PlaneGeometry(1000,1000),new THREE.MeshBasicMaterial({map:q}))
    ccc.rotation.x=-90*Math.PI/180
    scene.add(ccc)
// console.log(scene.children[0].name)

window.addEventListener('resize',windowResize,false)
window.addEventListener('keydown',mouseMove,false)
window.addEventListener('mousedown',mouseDown,false)
window.addEventListener('mouseup',mouseUp,false)
}

  function render(){

    renderer.render(scene,camera)
    requestAnimationFrame(render)
  }
  function go(){
    init()
    render()
  }
  function canvas1(){
    var canvas=document.createElement('canvas')
    canvas.width=64
    canvas.height=64
    var c=canvas.getContext('2d')
    c.arc(32,32,32,0,20)
    c.fillStyle='white'
    c.fill()
    return canvas;
  }
  function windowResize(){
    wiW=window.innerWidth
    wiH=window.innerHeight
    renderer.setSize(wiW,wiH)
    camera.aspect=wiW/wiH
    camera.updateProjectionMatrix()
  }

  function mouseMove(e){
    console.log(e.keyCode)
    //W  87   S83  A 65  D68
    //
    switch(e.keyCode){
      case 87:
       case 38:
      camera.translateZ(-1.2);
      break;
      case 83:
      case 40:
      camera.translateZ(1.2);
      break;
      case 65:
      case 37:
      camera.translateX(-1.2);
      break;
      case 68:
      case 39:
      camera.translateX(1.2);
      break;
      case 32:
      camera.translateY(1.2)
      break;
      case 90:
      camera.translateY(-1.2);
      break;
    }
  }
  function mouseDown(e){
    clickFlag=true
    var eX=e.clientX
     var eY=e.clientY
      window.onmousemove=function(e){
          if(clickFlag){
            camera.rotateY(-(e.clientX-eX)/20000)
             camera.rotateX(-(e.clientY-eY)/200000)
      }
    }
  }
  function mouseUp(){
    clickFlag=false
  }
</script>
</body>
</html>
